'use strict';function _defineProperty(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}var map,app=angular.module('app',['ngRoute','chart.js']);function hideMobMenu(){document.getElementById('#mobMenuButton').attr('aria-expanded','false')}app.config(['$routeProvider',a=>{a.when('/',{templateUrl:'template/dash.html'}).when('/map',{templateUrl:'template/map.html'}).when('/chart',{templateUrl:'template/chart.html'}).when('/news',{templateUrl:'template/news.html'}).when('/stat',{templateUrl:'template/stat.html'})}]);app.controller('getStat',['$scope','$http','$filter',function(a,b,c){var d,e=!0;a.order=function(f,g){if(d==f&&e==!1){switch(g){case'statYear':this.statYear=c('orderBy')(this.statYear,f,'reverse');break;case'statLast1':this.statLast1=c('orderBy')(this.statLast1,f,'reverse');break;case'statLast2':this.statLast2=c('orderBy')(this.statLast2,f,'reverse');break;case'statLast3':this.statLast3=c('orderBy')(this.statLast3,f,'reverse');break;}e=!e}else if(d==f&&e==!0){switch(g){case'statYear':this.statYear=c('orderBy')(this.statYear,f);break;case'statLast1':this.statLast1=c('orderBy')(this.statLast1,f);break;case'statLast2':this.statLast2=c('orderBy')(this.statLast2,f);break;case'statLast3':this.statLast3=c('orderBy')(this.statLast3,f);break;}e=!e}else if(d!=f&&e==!1){switch(g){case'statYear':this.statYear=c('orderBy')(this.statYear,f,'reverse');break;case'statLast1':this.statLast1=c('orderBy')(this.statLast1,f,'reverse');break;case'statLast2':this.statLast2=c('orderBy')(this.statLast2,f,'reverse');break;case'statLast3':this.statLast3=c('orderBy')(this.statLast3,f,'reverse');break;}e=!e}else{switch(g){case'statYear':this.statYear=c('orderBy')(this.statYear,f);break;case'statLast1':this.statLast1=c('orderBy')(this.statLast1,f);break;case'statLast2':this.statLast2=c('orderBy')(this.statLast2,f);break;case'statLast3':this.statLast3=c('orderBy')(this.statLast3,f);break;}e=!e}d=f};b.get('../others/2016Total.csv').then(f=>{var g=f.data.split(/\r?\n|\r/),h=[],j=[],l={};for(var m=2;m<g.length;m++){var n=g[m].split(';');h.push(n)}for(var k=0;k<h.length;k++){l={};l.num=Number(h[k][0]);l.month=h[k][1];l.totalGross=Number(h[k][2]);l.percentYearGross=Number(h[k][3]);l.movies=Number(h[k][4]);l.topMovie=h[k][7];l.topMovieGross=Number(h[k][8]);l.percentMonthGross=Number(h[k][9]);j.push(l)}a.statYear=j;var o=[],p=[],q=[],r=[];for(var i=0;i<j.length;i++){o.push(j[i].month);p.push(j[i].totalGross);q.push(j[i].topMovieGross);r.push(j[i].topMovie)}a.labelsY=o;a.seriesY=['Total gross','1st movie gross'];a.dataY=[p,q];a.onClick=(s,t)=>{console.log(s,t)};a.datasetOverride=[{yAxisID:'y-axis-1'}];a.options={scales:{yAxes:[{id:'y-axis-1',type:'linear',display:!0,position:'left'}]}}});b.get('../others/2017.01.csv').then(f=>{var g=f.data.split(/\r?\n|\r/),h=[],j=[],l={};for(var m=1;m<g.length;m++){var n=g[m].split(';');h.push(n)}for(var k=0;k<h.length;k++){l={};l.number1=Number(h[k][0]);l.name1=h[k][1];l.totalGross1=Number(h[k][3]);l.firstWeekGross1=Number(h[k][5]);l.cinemas1=Number(h[k][4]);l.startDate1=h[k][6];l.finishDate1=h[k][7];j.push(l)}a.statLast1=j;var o=[],p=[],q=[];for(var i=0;i<j.length;i++){o.push(j[i].name1);p.push(j[i].totalGross1);q.push(j[i].firstWeekGross1)}a.labels1=o;a.series1=['Total gross','1st week gross'];a.data1=[p,q]});b.get('../others/2016.12.csv').then(f=>{var g=f.data.split(/\r?\n|\r/),h=[],j=[],l={};for(var m=1;m<g.length;m++){var n=g[m].split(';');h.push(n)}for(var k=0;k<h.length;k++){l={};l.number2=Number(h[k][0]);l.name2=h[k][1];l.totalGross2=Number(h[k][3]);l.firstWeekGross2=Number(h[k][5]);l.cinemas2=Number(h[k][4]);l.startDate2=h[k][6];l.finishDate2=h[k][7];j.push(l)}a.statLast2=j;var o=[],p=[],q=[];for(var i=0;i<j.length;i++){o.push(j[i].name2);p.push(j[i].totalGross2);q.push(j[i].firstWeekGross2)}a.labels2=o;a.series2=['Total gross','1st week gross'];a.data2=[p,q]});b.get('../others/2016.11.csv').then(f=>{var g=f.data.split(/\r?\n|\r/),h=[],j=[],l={};for(var m=1;m<g.length;m++){var n=g[m].split(';');h.push(n)}for(var k=0;k<h.length;k++){l={};l.number3=Number(h[k][0]);l.name3=h[k][1];l.totalGross3=Number(h[k][3]);l.firstWeekGross3=Number(h[k][5]);l.cinemas3=Number(h[k][4]);l.startDate3=h[k][6];l.finishDate3=h[k][7];j.push(l)}a.statLast3=j;var o=[],p=[],q=[];for(var i=0;i<j.length;i++){o.push(j[i].name3);p.push(j[i].totalGross3);q.push(j[i].firstWeekGross3)}a.labels3=o;a.series3=['Total gross','1st week gross'];a.data3=[p,q]})}]);app.controller('getChart',['$scope','$http',(a,b)=>{b.get('https://api.themoviedb.org/3/movie/now_playing?api_key=bbc248f411ec3657bd9844f9bd4a2bda&language=en-US&page=1').then(c=>{a.charts=c.data.results})}]);app.controller('getTrailer',['$scope','$http',function(a,b){var c,d;b.get('https://api.themoviedb.org/3/movie/now_playing?api_key=bbc248f411ec3657bd9844f9bd4a2bda&language=en-US&page=1').then(e=>{c=e.data.results[0].id;return c}).then(e=>{var f='https://api.themoviedb.org/3/movie/'+e+'/videos?api_key=bbc248f411ec3657bd9844f9bd4a2bda&language=en-US';b.get(f).then(g=>{d='<iframe src="https://www.youtube.com/embed/'+g.data.results[0].key+'" frameborder="0" allowfullscreen></iframe>';a.trailer=d})});this.showMe=!1;a.showPopup=function(){this.showMe=!this.showMe;var e=angular.element(document.querySelector('#youtubeDiv'));e.append(d)};a.hidePopup=function(){this.showMe=!1}}]);app.controller('getCurrent',['$scope','$location',(a,b)=>{a.isCurrentPage=path=>path==b.path()}]);app.controller('getNews',['$scope','$http',(a,b)=>{var c=setTimeout(()=>{b.get('https://newsapi.org/v1/articles?source=daily-mail&sortBy=latest&apiKey=3e39927ec00f48d4b859103489c06f38').then(d=>{a.news=d.data.articles});b.get('https://newsapi.org/v1/articles?source=entertainment-weekly&sortBy=top&apiKey=3e39927ec00f48d4b859103489c06f38').then(d=>{a.news2=d.data.articles});console.log('news updated');c=setTimeout(theNews,120000)},0)}]);app.controller('getMap',['$scope','$http',(a,b)=>{b.get('../others/cities.csv').then(c=>{var e=[],f=[],g=c.data.split(/\r?\n|\r/);for(var h=1;h<g.length;h++){var j,l=g[h].split(';');e.push((j={},_defineProperty(j,'lat',eval(l[2])),_defineProperty(j,'lng',eval(l[3])),j))}for(var m=1;m<g.length;m++){var n=g[m].split(';');f.push([n[0],n[1]])}a.cities=f;function d(){var q={lat:30,lng:0};map=new google.maps.Map(document.getElementById('map'),{zoom:2,center:q})}d();var o=e.map(location=>new google.maps.Marker({position:location,label:'Movie business is here!'})),p=new MarkerClusterer(map,o,{imagePath:'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'})})}]);if('serviceWorker'in navigator){navigator.serviceWorker.register('/swGetData.js').then(a=>{console.log('SWORKER registered:',a)}).catch(a=>{console.log('SWORKER registration error: '+a)})}