'use strict';var appCache='MovieDash',dataCache='MovieDashData';self.addEventListener('install',a=>{a.waitUntil(caches.open(dataCache).then(cache=>cache.addAll(['/index.html','/css/main.css','/js/main.js'])))});self.addEventListener('activate',a=>{console.log('SWORKER: activating');a.waitUntil(caches.keys().then(cacheNames=>Promise.all(cacheNames.map(b=>{if(b!==appCache&&b!==dataCache){console.log('SWORKER: Deleting '+b);return caches.delete(b)}}))))});self.addEventListener('fetch',a=>{console.log('SWORKER: is fetching '+a.request.url+' now.');if(a.request.url.startsWith('http')){a.respondWith(fetch(a.request).then(response=>caches.open(appCache).then(b=>{b.put(a.request.url,response.clone());console.log('SWORKER: fetched cached data');return response})))}else{a.respondWith(caches.match(a.request).then(b=>{console.log('SWORKER: fetch event',b?'(cached)':'(network)',a.request.url);return b||fetch(a.request)}))}});